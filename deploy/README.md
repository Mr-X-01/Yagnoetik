# Yagnoetik VPN - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Ubuntu 24.04

## –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Ubuntu 24.04 —Å–µ—Ä–≤–µ—Ä
- –î–æ–º–µ–Ω —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ DNS –∑–∞–ø–∏—Å—è–º–∏ (A-–∑–∞–ø–∏—Å—å –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞)
- Root –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:**
```bash
ssh root@your-domain.com
```

2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```bash
wget https://raw.githubusercontent.com/Mr-X-01/Yagnoetik/main/deploy/install.sh
chmod +x install.sh
sudo ./install.sh your-domain.com admin@your-domain.com
```

**–ì–æ—Ç–æ–≤–æ!** –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ö–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å GitHub
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ù–∞—Å—Ç—Ä–æ–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –°–æ–±–µ—Ä–µ—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –û–±–Ω–æ–≤–ª—è–µ—Ç Ubuntu 24.04
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Go 1.23, Nginx, Certbot
- –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `yagnoetik`
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ñ–∞–π—Ä–≤–æ–ª (UFW)

### üîí SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ cron
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç Nginx —Å SSL

### üåê Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **–ü–æ—Ä—Ç 443**: –û—Å–Ω–æ–≤–Ω–æ–π HTTPS —Å–µ—Ä–≤–µ—Ä (–ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ 8444)
- **–ü–æ—Ä—Ç 8080**: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ 8081)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ gRPC –∏ HTTP/2
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

### ‚öôÔ∏è Systemd —Å–µ—Ä–≤–∏—Å—ã
- `yagnoetik-server.service`: –û—Å–Ω–æ–≤–Ω–æ–π VPN —Å–µ—Ä–≤–µ—Ä
- `yagnoetik-admin.service`: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
- –ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ production —Å–∏—Å—Ç–µ–º—ã

```
Internet ‚Üí Nginx (443/8080) ‚Üí Yagnoetik Server (8444/8081)
                           ‚Üì
                    Admin API (8443)
```

### –ü–æ—Ä—Ç—ã
- **443**: HTTPS (Nginx ‚Üí Yagnoetik Server 8444)
- **8080**: Admin Panel HTTPS (Nginx ‚Üí Admin Panel 8081)
- **8444**: Yagnoetik Server (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **8443**: Admin API HTTP (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **8081**: Admin Panel (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)

## –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–æ–º–∞–Ω–¥—ã:

```bash
yagnoetik start      # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
yagnoetik stop       # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
yagnoetik restart    # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
yagnoetik status     # –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
yagnoetik logs       # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
yagnoetik build      # –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```

## –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

- **–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä**: `https://your-domain.com`
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: `https://your-domain.com:8080`
- **API –∫–ª—é—á**: –í—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ!)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –§–∞–π—Ä–≤–æ–ª
- –û—Ç–∫—Ä—ã—Ç—ã —Ç–æ–ª—å–∫–æ –ø–æ—Ä—Ç—ã: 22 (SSH), 80, 443, 8080
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã

### SSL/TLS
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ HTTPS –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- HSTS –∑–∞–≥–æ–ª–æ–≤–∫–∏

### –°–∏—Å—Ç–µ–º–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –°–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–¥ –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
- –ò–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
```bash
# –í—Å–µ –ª–æ–≥–∏
yagnoetik logs

# –¢–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä
journalctl -f -u yagnoetik-server

# –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
journalctl -f -u yagnoetik-admin

# Nginx –ª–æ–≥–∏
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

### –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
systemctl status yagnoetik-server yagnoetik-admin nginx

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
htop

# –°–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
netstat -tulpn | grep :443
netstat -tulpn | grep :8080
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
yagnoetik stop

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
cd /opt/yagnoetik/Yagnoetik
git pull  # –∏–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
yagnoetik build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
yagnoetik start
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ cron. –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
certbot certificates
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã
ss -tulpn | grep -E ':(443|8080|8444|8443|8081)'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
openssl s_client -connect your-domain.com:443 -servername your-domain.com
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS –∑–∞–ø–∏—Å–∏
dig your-domain.com A
nslookup your-domain.com
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx
```bash
nginx -t          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
systemctl reload nginx
```

## –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –±—ç–∫–∞–ø–∞
- `/opt/yagnoetik/config.env` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `/etc/letsencrypt/` - SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- `/etc/nginx/sites-available/yagnoetik` - Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### –°–∫—Ä–∏–ø—Ç –±—ç–∫–∞–ø–∞
```bash
#!/bin/bash
BACKUP_DIR="/backup/yagnoetik-$(date +%Y%m%d)"
mkdir -p $BACKUP_DIR

cp -r /opt/yagnoetik/config.env $BACKUP_DIR/
cp -r /etc/letsencrypt/ $BACKUP_DIR/
cp /etc/nginx/sites-available/yagnoetik $BACKUP_DIR/

tar -czf yagnoetik-backup-$(date +%Y%m%d).tar.gz $BACKUP_DIR/
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
- **–ú–∏–Ω–∏–º—É–º**: 1 CPU, 1GB RAM, 20GB SSD
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**: 2 CPU, 2GB RAM, 40GB SSD
- **–î–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏**: 4+ CPU, 4GB+ RAM, 100GB+ SSD

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ Nginx
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
- –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
- –†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
